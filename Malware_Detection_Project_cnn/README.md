# MALWARE-DETECTION-USING-CNN
# 🛡️ Malware Detection Using CNN

This project implements a malware detection system that leverages **Convolutional Neural Networks (CNN)** to classify executable files as malicious or benign. It integrates an **email monitoring system**, which scans incoming emails for Google Drive links, fetches the attachments, converts them to grayscale images, and evaluates them using a CNN-based classifier — all within a **WSL-based sandboxed environment**.

---

## 📌 Key Features

- 📧 **Email Honeytrap**: Automatically reads the latest emails using Gmail API and extracts Google Drive links pointing to suspicious attachments.
- 🖼️ **Binary-to-Image Conversion**: Converts executable files into grayscale images for deep learning processing.
- 🧠 **CNN-based Classification**: Uses a trained CNN model (adapted from [this repo](https://github.com/cridin1/malware-classification-CNN)) to identify whether the attachment is malware or benign.
- 🧪 **WSL Sandbox Execution**: All CNN evaluation is done inside a **sandboxed WSL (Windows Subsystem for Linux)** instance using SSH, ensuring system safety.
- 🌐 **Flask Web Interface**: Allows users to initiate scans and view results through a simple UI.

---

## 🖼️ Architecture Overview


1. Email checked for drive attachments.
2. The file is pulled via SSH into WSL sandbox.
3. Executable converted to image.
4. CNN runs prediction.
5. Result is returned and displayed in the UI.

![image](https://github.com/user-attachments/assets/de92c67e-861d-4e10-857e-4228596ee5b4)

---
## 📊 Model Comparison: Baseline vs Improved Model

### 🛠️ **Baseline Model**
The **Baseline Model** is the initial version of the CNN used for malware detection. It has the following architecture:

- Convolutional layers followed by max-pooling and dropout layers.
- Dense layers at the end for final classification.

![Baseline Model Architecture](https://github.com/user-attachments/assets/72bb0aeb-d249-4111-806c-cf3ea6a7f781)


### 🔧 **Improved Model**
The **Improved Model** incorporates **Batch Normalization** and **Activation Functions** to enhance performance and training stability. Key improvements:

- Additional convolutional layers with batch normalization and activations.
- Dropout and batch normalization at different stages for better regularization.

![Improved Model Architecture](https://github.com/user-attachments/assets/9e6eb6ee-7746-4d21-acbc-9fd99cf63649)


### **Training Curves**:
![image](https://github.com/user-attachments/assets/3f26bfd4-b712-4131-94c6-34018f3c12b0)
---
## 🔧 Tech Stack

- **Frontend**: HTML, CSS, JavaScript (Flask-rendered)
- **Backend**: Python, Flask
- **Model**: CNN using TensorFlow/Keras
- **APIs**: Gmail API, Google Drive
- **Sandbox**: WSL2 with SSH and SCP
- **Security**: Local sandbox ensures malicious code doesn't run on the main OS

---

## 🚀 How to Run Locally

### 1. Clone the Repo
```bash
git clone https://github.com/nalankrishnav/MALWARE-DETECTION-USING-CNN.git
cd MALWARE-DETECTION-USING-CNN
